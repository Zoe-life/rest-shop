# Cloudflare Workers Configuration - Gateway
name = "rest-shop-gateway"
main = "src/gateway-worker.js"

# Gateway Worker - Microservices Router
# This is the main entry point that routes traffic to appropriate services
# Stays tiny (~50KB) to ensure fast cold starts

# Compatibility flags
compatibility_date = "2026-01-20"
compatibility_flags = [ "nodejs_compat" ]

# Account details (will be overridden by secrets in CI/CD)
workers_dev = true

# Environment variables (non-sensitive)
[vars]
NODE_ENV = "production"

# Service bindings to other workers
# These allow zero-latency internal routing between workers
[[services]]
binding = "PAYMENT_SERVICE"
service = "rest-shop-payments"

[[services]]
binding = "BASE_SERVICE"
service = "rest-shop-api"
