<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #2c3e50; }
      .subtitle { font: bold 14px sans-serif; fill: #34495e; }
      .test { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .setup { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .result { fill: #f39c12; stroke: #d68910; stroke-width: 2; }
      .text { font: 13px sans-serif; fill: white; text-anchor: middle; }
      .smalltext { font: 11px sans-serif; fill: white; }
      .label { font: 12px sans-serif; fill: #2c3e50; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title">Testing Workflow & Strategy</text>
  
  <!-- Test Setup -->
  <text x="450" y="65" class="subtitle">Test Environment Setup</text>
  
  <rect x="150" y="80" width="600" height="80" class="setup" rx="5"/>
  <text x="450" y="110" class="text" style="font-size: 16px; font-weight: bold;">MongoDB Memory Server</text>
  <text x="450" y="130" class="smalltext" style="fill: white; text-anchor: middle;">In-memory database for isolated testing</text>
  <text x="450" y="148" class="smalltext" style="fill: white; text-anchor: middle;">No external dependencies • Fast execution • Automatic cleanup</text>
  
  <path d="M 450 160 L 450 185" class="arrow"/>
  
  <!-- Test Types -->
  <text x="450" y="205" class="subtitle">Test Suite Structure</text>
  
  <!-- Unit Tests -->
  <rect x="50" y="230" width="180" height="140" class="test" rx="5"/>
  <text x="140" y="255" class="text" style="font-weight: bold;">Unit Tests</text>
  <text x="60" y="278" class="smalltext" style="fill: white;">Coverage:</text>
  <text x="65" y="295" class="smalltext" style="fill: white;">• User authentication</text>
  <text x="65" y="310" class="smalltext" style="fill: white;">• Password validation</text>
  <text x="65" y="325" class="smalltext" style="fill: white;">• JWT generation</text>
  <text x="65" y="340" class="smalltext" style="fill: white;">• Bcrypt hashing</text>
  <text x="65" y="355" class="smalltext" style="fill: white;">• Input sanitization</text>
  
  <!-- Integration Tests -->
  <rect x="250" y="230" width="180" height="140" class="test" rx="5"/>
  <text x="340" y="255" class="text" style="font-weight: bold;">Integration Tests</text>
  <text x="260" y="278" class="smalltext" style="fill: white;">Coverage:</text>
  <text x="265" y="295" class="smalltext" style="fill: white;">• API endpoints</text>
  <text x="265" y="310" class="smalltext" style="fill: white;">• Database operations</text>
  <text x="265" y="325" class="smalltext" style="fill: white;">• Middleware chain</text>
  <text x="265" y="340" class="smalltext" style="fill: white;">• Error handling</text>
  <text x="265" y="355" class="smalltext" style="fill: white;">• Request flow</text>
  
  <!-- Controller Tests -->
  <rect x="450" y="230" width="180" height="140" class="test" rx="5"/>
  <text x="540" y="255" class="text" style="font-weight: bold;">Controller Tests</text>
  <text x="460" y="278" class="smalltext" style="fill: white;">Coverage:</text>
  <text x="465" y="295" class="smalltext" style="fill: white;">• User controller</text>
  <text x="465" y="310" class="smalltext" style="fill: white;">• Product controller</text>
  <text x="465" y="325" class="smalltext" style="fill: white;">• Order controller</text>
  <text x="465" y="340" class="smalltext" style="fill: white;">• Business logic</text>
  <text x="465" y="355" class="smalltext" style="fill: white;">• Validation rules</text>
  
  <!-- Middleware Tests -->
  <rect x="650" y="230" width="180" height="140" class="test" rx="5"/>
  <text x="740" y="255" class="text" style="font-weight: bold;">Middleware Tests</text>
  <text x="660" y="278" class="smalltext" style="fill: white;">Coverage:</text>
  <text x="665" y="295" class="smalltext" style="fill: white;">• JWT authentication</text>
  <text x="665" y="310" class="smalltext" style="fill: white;">• Role-based access</text>
  <text x="665" y="325" class="smalltext" style="fill: white;">• Error handling</text>
  <text x="665" y="340" class="smalltext" style="fill: white;">• Request validation</text>
  <text x="665" y="355" class="smalltext" style="fill: white;">• Security headers</text>
  
  <!-- Test Execution Flow -->
  <text x="450" y="400" class="subtitle">Test Execution Workflow</text>
  
  <rect x="100" y="420" width="130" height="50" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
  <text x="165" y="442" class="text">1. Setup</text>
  <text x="165" y="458" class="smalltext" style="fill: white;">DB & Mocks</text>
  
  <rect x="250" y="420" width="130" height="50" fill="#27ae60" stroke="#229954" stroke-width="2" rx="5"/>
  <text x="315" y="442" class="text">2. Execute</text>
  <text x="315" y="458" class="smalltext" style="fill: white;">Run Tests</text>
  
  <rect x="400" y="420" width="130" height="50" fill="#f39c12" stroke="#d68910" stroke-width="2" rx="5"/>
  <text x="465" y="442" class="text">3. Assert</text>
  <text x="465" y="458" class="smalltext" style="fill: white;">Verify Results</text>
  
  <rect x="550" y="420" width="130" height="50" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5"/>
  <text x="615" y="442" class="text">4. Teardown</text>
  <text x="615" y="458" class="smalltext" style="fill: white;">Cleanup</text>
  
  <path d="M 230 445 L 250 445" class="arrow"/>
  <path d="M 380 445 L 400 445" class="arrow"/>
  <path d="M 530 445 L 550 445" class="arrow"/>
  
  <!-- Testing Tools -->
  <rect x="50" y="500" width="800" height="130" fill="#ecf0f1" stroke="#34495e" stroke-width="2" rx="5"/>
  <text x="450" y="525" class="subtitle">Testing Tools & Frameworks</text>
  
  <g>
    <text x="70" y="555" class="label" style="font-weight: bold;">Test Framework:</text>
    <text x="70" y="573" class="label" style="font-size: 11px;">• Mocha - Test runner</text>
    <text x="70" y="588" class="label" style="font-size: 11px;">• Chai - Assertion library</text>
    <text x="70" y="603" class="label" style="font-size: 11px;">• Timeout: 10000ms</text>
  </g>
  
  <g>
    <text x="280" y="555" class="label" style="font-weight: bold;">Mocking & Stubbing:</text>
    <text x="280" y="573" class="label" style="font-size: 11px;">• Sinon - Spies & stubs</text>
    <text x="280" y="588" class="label" style="font-size: 11px;">• Mock external services</text>
    <text x="280" y="603" class="label" style="font-size: 11px;">• Isolate components</text>
  </g>
  
  <g>
    <text x="490" y="555" class="label" style="font-weight: bold;">API Testing:</text>
    <text x="490" y="573" class="label" style="font-size: 11px;">• Supertest - HTTP assertions</text>
    <text x="490" y="588" class="label" style="font-size: 11px;">• Test all endpoints</text>
    <text x="490" y="603" class="label" style="font-size: 11px;">• Status code validation</text>
  </g>
  
  <g>
    <text x="690" y="555" class="label" style="font-weight: bold;">Coverage:</text>
    <text x="690" y="573" class="label" style="font-size: 11px;">• Istanbul/NYC</text>
    <text x="690" y="588" class="label" style="font-size: 11px;">• Line coverage report</text>
    <text x="690" y="603" class="label" style="font-size: 11px;">• Branch coverage</text>
  </g>
</svg>
