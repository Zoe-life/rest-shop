<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #2c3e50; }
      .box { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .database { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .security { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .text { font: 14px sans-serif; fill: white; text-anchor: middle; }
      .label { font: 12px sans-serif; fill: #34495e; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" class="title">REST API System Architecture</text>
  
  <!-- Client Layer -->
  <rect x="320" y="60" width="160" height="60" class="box" rx="5"/>
  <text x="400" y="95" class="text">Client Applications</text>
  <text x="400" y="110" class="label" style="fill: white; font-size: 11px;">(Web, Mobile, Desktop)</text>
  
  <!-- API Gateway / Express -->
  <rect x="300" y="160" width="200" height="60" class="box" rx="5"/>
  <text x="400" y="190" class="text">Express.js Server</text>
  <text x="400" y="205" class="label" style="fill: white; font-size: 11px;">(API Gateway + Router)</text>
  
  <!-- Security Middleware -->
  <rect x="50" y="160" width="180" height="60" class="security" rx="5"/>
  <text x="140" y="185" class="text">Security Layer</text>
  <text x="140" y="200" class="label" style="fill: white; font-size: 10px;">Helmet, CORS, Rate Limit</text>
  <text x="140" y="213" class="label" style="fill: white; font-size: 10px;">XSS, Validation</text>
  
  <!-- Auth Middleware -->
  <rect x="570" y="160" width="180" height="60" class="security" rx="5"/>
  <text x="660" y="185" class="text">Auth Layer</text>
  <text x="660" y="200" class="label" style="fill: white; font-size: 10px;">JWT, OAuth 2.0</text>
  <text x="660" y="213" class="label" style="fill: white; font-size: 10px;">Passport.js</text>
  
  <!-- Controllers Layer -->
  <rect x="100" y="280" width="130" height="60" class="box" rx="5"/>
  <text x="165" y="305" class="text">User</text>
  <text x="165" y="320" class="text">Controller</text>
  
  <rect x="260" y="280" width="130" height="60" class="box" rx="5"/>
  <text x="325" y="305" class="text">Product</text>
  <text x="325" y="320" class="text">Controller</text>
  
  <rect x="420" y="280" width="130" height="60" class="box" rx="5"/>
  <text x="485" y="305" class="text">Order</text>
  <text x="485" y="320" class="text">Controller</text>
  
  <rect x="580" y="280" width="130" height="60" class="box" rx="5"/>
  <text x="645" y="305" class="text">Auth</text>
  <text x="645" y="320" class="text">Controller</text>
  
  <!-- Models Layer -->
  <rect x="140" y="400" width="100" height="50" class="database" rx="5"/>
  <text x="190" y="430" class="text">User Model</text>
  
  <rect x="270" y="400" width="100" height="50" class="database" rx="5"/>
  <text x="320" y="430" class="text">Product Model</text>
  
  <rect x="400" y="400" width="100" height="50" class="database" rx="5"/>
  <text x="450" y="430" class="text">Order Model</text>
  
  <!-- Database -->
  <ellipse cx="400" cy="520" rx="140" ry="50" class="database"/>
  <text x="400" y="515" class="text">MongoDB Atlas</text>
  <text x="400" y="535" class="label" style="fill: white; font-size: 11px;">(Cloud Database)</text>
  
  <!-- Arrows -->
  <path d="M 400 120 L 400 160" class="arrow"/>
  <path d="M 400 220 L 165 280" class="arrow"/>
  <path d="M 400 220 L 325 280" class="arrow"/>
  <path d="M 400 220 L 485 280" class="arrow"/>
  <path d="M 400 220 L 645 280" class="arrow"/>
  
  <path d="M 165 340 L 190 400" class="arrow"/>
  <path d="M 325 340 L 320 400" class="arrow"/>
  <path d="M 485 340 L 450 400" class="arrow"/>
  
  <path d="M 240 450 L 310 490" class="arrow"/>
  <path d="M 370 450 L 400 470" class="arrow"/>
  <path d="M 450 450 L 450 470" class="arrow"/>
  
  <!-- Security and Auth connections -->
  <path d="M 230 190 L 300 190" class="arrow"/>
  <path d="M 500 190 L 570 190" class="arrow"/>
</svg>
