<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #2c3e50; }
      .schema-box { fill: #ecf0f1; stroke: #27ae60; stroke-width: 3; }
      .header { fill: #27ae60; }
      .text { font: 14px sans-serif; fill: #2c3e50; }
      .header-text { font: bold 16px sans-serif; fill: white; text-anchor: middle; }
      .field { font: 12px monospace; fill: #2c3e50; }
      .type { font: 12px monospace; fill: #7f8c8d; }
      .relation { stroke: #3498db; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .relation-label { font: 11px sans-serif; fill: #3498db; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title">MongoDB Database Schema</text>
  
  <!-- User Schema -->
  <g>
    <rect x="50" y="70" width="250" height="30" class="header" rx="5"/>
    <text x="175" y="92" class="header-text">User Schema</text>
    
    <rect x="50" y="100" width="250" height="240" class="schema-box" rx="5"/>
    <text x="60" y="125" class="field">_id:</text>
    <text x="200" y="125" class="type">ObjectId</text>
    
    <text x="60" y="148" class="field">email:</text>
    <text x="200" y="148" class="type">String (unique)</text>
    
    <text x="60" y="171" class="field">password:</text>
    <text x="200" y="171" class="type">String (hashed)</text>
    
    <text x="60" y="194" class="field">role:</text>
    <text x="200" y="194" class="type">String (enum)</text>
    
    <text x="60" y="217" class="field">provider:</text>
    <text x="200" y="217" class="type">String</text>
    
    <text x="60" y="240" class="field">providerId:</text>
    <text x="200" y="240" class="type">String</text>
    
    <text x="60" y="263" class="field">createdAt:</text>
    <text x="200" y="263" class="type">Date</text>
    
    <text x="60" y="286" class="field">updatedAt:</text>
    <text x="200" y="286" class="type">Date</text>
    
    <text x="60" y="320" class="type" style="font-style: italic;">Indexes:</text>
    <text x="60" y="335" class="type" style="font-size: 10px;">• email (unique)</text>
  </g>
  
  <!-- Product Schema -->
  <g>
    <rect x="330" y="70" width="250" height="30" class="header" rx="5"/>
    <text x="455" y="92" class="header-text">Product Schema</text>
    
    <rect x="330" y="100" width="250" height="240" class="schema-box" rx="5"/>
    <text x="340" y="125" class="field">_id:</text>
    <text x="480" y="125" class="type">ObjectId</text>
    
    <text x="340" y="148" class="field">name:</text>
    <text x="480" y="148" class="type">String (required)</text>
    
    <text x="340" y="171" class="field">price:</text>
    <text x="480" y="171" class="type">Number (required)</text>
    
    <text x="340" y="194" class="field">productImage:</text>
    <text x="480" y="194" class="type">String (URL)</text>
    
    <text x="340" y="217" class="field">description:</text>
    <text x="480" y="217" class="type">String</text>
    
    <text x="340" y="240" class="field">createdBy:</text>
    <text x="480" y="240" class="type">ObjectId → User</text>
    
    <text x="340" y="263" class="field">createdAt:</text>
    <text x="480" y="263" class="type">Date</text>
    
    <text x="340" y="286" class="field">updatedAt:</text>
    <text x="480" y="286" class="type">Date</text>
    
    <text x="340" y="320" class="type" style="font-style: italic;">Validation:</text>
    <text x="340" y="335" class="type" style="font-size: 10px;">• price &gt; 0</text>
  </g>
  
  <!-- Order Schema -->
  <g>
    <rect x="610" y="70" width="250" height="30" class="header" rx="5"/>
    <text x="735" y="92" class="header-text">Order Schema</text>
    
    <rect x="610" y="100" width="250" height="280" class="schema-box" rx="5"/>
    <text x="620" y="125" class="field">_id:</text>
    <text x="760" y="125" class="type">ObjectId</text>
    
    <text x="620" y="148" class="field">product:</text>
    <text x="760" y="148" class="type">ObjectId → Product</text>
    
    <text x="620" y="171" class="field">quantity:</text>
    <text x="760" y="171" class="type">Number (required)</text>
    
    <text x="620" y="194" class="field">user:</text>
    <text x="760" y="194" class="type">ObjectId → User</text>
    
    <text x="620" y="217" class="field">status:</text>
    <text x="760" y="217" class="type">String (enum)</text>
    
    <text x="620" y="240" class="field">totalPrice:</text>
    <text x="760" y="240" class="type">Number</text>
    
    <text x="620" y="263" class="field">createdAt:</text>
    <text x="760" y="263" class="type">Date</text>
    
    <text x="620" y="286" class="field">updatedAt:</text>
    <text x="760" y="286" class="type">Date</text>
    
    <text x="620" y="320" class="type" style="font-style: italic;">Validation:</text>
    <text x="620" y="335" class="type" style="font-size: 10px;">• quantity ≥ 1</text>
    <text x="620" y="350" class="type" style="font-size: 10px;">• product must exist</text>
    <text x="620" y="365" class="type" style="font-size: 10px;">• user must exist</text>
  </g>
  
  <!-- Relationships -->
  <path d="M 300 240 L 330 240" class="relation"/>
  <text x="310" y="230" class="relation-label">creates</text>
  
  <path d="M 580 148 L 610 148" class="relation"/>
  <text x="588" y="138" class="relation-label">references</text>
  
  <path d="M 175 340 L 650 380" class="relation"/>
  <text x="400" y="375" class="relation-label">places orders</text>
  
  <!-- Legend -->
  <g>
    <rect x="50" y="420" width="800" height="180" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" rx="5"/>
    <text x="450" y="445" class="title" style="font-size: 16px;">Schema Details &amp; Constraints</text>
    
    <text x="70" y="475" class="field" style="font-size: 13px; font-weight: bold;">User Roles:</text>
    <text x="70" y="495" class="type" style="font-size: 12px;">• 'user' - Standard user with limited permissions</text>
    <text x="70" y="512" class="type" style="font-size: 12px;">• 'admin' - Full access to all resources</text>
    
    <text x="420" y="475" class="field" style="font-size: 13px; font-weight: bold;">Order Status:</text>
    <text x="420" y="495" class="type" style="font-size: 12px;">• 'pending' - Order created, awaiting processing</text>
    <text x="420" y="512" class="type" style="font-size: 12px;">• 'processing' - Order being prepared</text>
    <text x="420" y="529" class="type" style="font-size: 12px;">• 'completed' - Order fulfilled</text>
    <text x="420" y="546" class="type" style="font-size: 12px;">• 'cancelled' - Order cancelled</text>
    
    <text x="70" y="545" class="field" style="font-size: 13px; font-weight: bold;">Auth Providers:</text>
    <text x="70" y="565" class="type" style="font-size: 12px;">• 'local' - Email/password authentication</text>
    <text x="70" y="582" class="type" style="font-size: 12px;">• 'google', 'microsoft', 'apple' - OAuth providers</text>
  </g>
</svg>
